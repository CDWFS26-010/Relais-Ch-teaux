# SystÃ¨me de Notation d'Ã‰vÃ©nements - Relais & ChÃ¢teaux

## ğŸ“‹ Description du projet

Application web de gestion de notation d'Ã©vÃ©nements avec systÃ¨me de rÃ´les et modÃ©ration.

## ğŸ› ï¸ Technologies utilisÃ©es

- **Framework**: Symfony 7.0
- **Base de donnÃ©es**: MySQL/MariaDB
- **Architecture**: MVC
- **Authentification**: Symfony Security Bundle
- **ORM**: Doctrine
- **Interface Admin**: EasyAdmin (optionnel)

## ğŸ‘¥ RÃ´les utilisateurs

### 1. Utilisateur standard (ROLE_USER)
- Consulter les Ã©vÃ©nements
- Publier des avis
- Modifier ses propres avis

### 2. Responsable d'Ã©vÃ©nement (ROLE_RESPONSABLE)
- Toutes les fonctionnalitÃ©s utilisateur
- GÃ©rer ses Ã©vÃ©nements
- ModÃ©rer les avis de ses Ã©vÃ©nements

### 3. Administrateur (ROLE_ADMIN)
- AccÃ¨s complet
- GÃ©rer tous les utilisateurs
- GÃ©rer tous les Ã©vÃ©nements
- ModÃ©rer tous les avis

## ğŸ“¦ Installation

### PrÃ©requis
- PHP 8.2 ou supÃ©rieur
- Composer
- MySQL/MariaDB
- Serveur web (Apache/Nginx)

### Ã‰tapes d'installation

1. **Cloner le projet**
```bash
git clone [votre-repo]
cd event-rating-app
```

2. **Installer les dÃ©pendances**
```bash
composer install
```

3. **Configurer la base de donnÃ©es**
```bash
# Ã‰diter le fichier .env
DATABASE_URL="mysql://user:password@127.0.0.1:3306/event_rating_db"
```

4. **CrÃ©er la base de donnÃ©es**
```bash
php bin/console doctrine:database:create
php bin/console doctrine:migrations:migrate
```

5. **Charger les donnÃ©es de test (fixtures)**
```bash
php bin/console doctrine:fixtures:load
```

6. **Lancer le serveur**
```bash
symfony server:start
# ou
php -S localhost:8000 -t public/
```

## ğŸ” Identifiants de test

### Administrateur
- **Email**: admin@relaischateaux.com
- **Mot de passe**: Admin123!

### Responsable d'Ã©vÃ©nement
- **Email**: responsable@relaischateaux.com
- **Mot de passe**: Resp123!

### Utilisateur standard
- **Email**: user@relaischateaux.com
- **Mot de passe**: User123!

## ğŸ“ Structure du projet

```
event-rating-app/
â”œâ”€â”€ config/              # Configuration Symfony
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Controller/      # ContrÃ´leurs
â”‚   â”œâ”€â”€ Entity/          # EntitÃ©s Doctrine
â”‚   â”œâ”€â”€ Form/            # Formulaires
â”‚   â”œâ”€â”€ Repository/      # Repositories
â”‚   â””â”€â”€ Security/        # Authentification
â”œâ”€â”€ templates/           # Vues Twig
â”œâ”€â”€ public/              # Fichiers publics
â””â”€â”€ var/                 # Cache et logs
```

## ğŸ¯ FonctionnalitÃ©s principales

### Gestion des Ã©vÃ©nements
- Liste des Ã©vÃ©nements avec filtres
- DÃ©tails d'un Ã©vÃ©nement
- Affichage des avis modÃ©rÃ©s

### Gestion des avis
- Publication d'avis (utilisateurs authentifiÃ©s)
- Modification de ses propres avis
- ModÃ©ration par responsable/admin
- VisibilitÃ© conditionnelle (avis non modÃ©rÃ©s invisibles)

### Dashboard
- Interface adaptÃ©e selon les droits
- Statistiques pour les responsables
- Gestion complÃ¨te pour les admins

## ğŸ“Š ModÃ¨le de donnÃ©es

### EntitÃ©s principales
- **Utilisateur**: Gestion des comptes et rÃ´les
- **Ã‰vÃ©nement**: Informations sur les Ã©vÃ©nements
- **Avis**: Notes et commentaires avec modÃ©ration
- **Responsable**: Association utilisateur-Ã©vÃ©nement

### Relations
- Un utilisateur peut crÃ©er plusieurs avis (1,n)
- Un Ã©vÃ©nement peut avoir plusieurs avis (1,n)
- Un avis est modÃ©rÃ© par le responsable de l'Ã©vÃ©nement (rÃ¨gle 1)

## âš™ï¸ RÃ¨gles de gestion implÃ©mentÃ©es

1. âœ… Un utilisateur ne peut modifier que ses propres avis
2. âœ… Un avis ne peut Ãªtre modÃ©rÃ© que par le responsable de l'Ã©vÃ©nement ou un administrateur
3. âœ… Un avis non modÃ©rÃ© n'est pas visible par les autres utilisateurs

## ğŸš€ Commandes utiles

```bash
# CrÃ©er un nouvel utilisateur
php bin/console app:create-user

# Nettoyer le cache
php bin/console cache:clear

# Mettre Ã  jour le schÃ©ma de la base
php bin/console doctrine:schema:update --force

# Voir les routes
php bin/console debug:router
```

## ğŸ“ Choix techniques

### Pourquoi Symfony ?
- Framework mature et robuste
- Excellente gestion de la sÃ©curitÃ©
- Architecture MVC claire
- Large Ã©cosystÃ¨me de bundles

### Architecture MVC
- **ModÃ¨le**: EntitÃ©s Doctrine avec validation
- **Vue**: Templates Twig rÃ©utilisables
- **ContrÃ´leur**: Logique mÃ©tier sÃ©parÃ©e

### SÃ©curitÃ©
- Hashage des mots de passe avec bcrypt
- Protection CSRF sur les formulaires
- Validation des donnÃ©es cÃ´tÃ© serveur
- ContrÃ´le d'accÃ¨s par rÃ´les (voters)

## ğŸ› DifficultÃ©s rencontrÃ©es et solutions

### 1. Gestion de la modÃ©ration
**ProblÃ¨me**: VisibilitÃ© conditionnelle des avis
**Solution**: Ajout d'un champ `estModere` avec filtre dans les requÃªtes

### 2. Permissions complexes
**ProblÃ¨me**: Un utilisateur peut modifier ses avis, un responsable peut modÃ©rer
**Solution**: Utilisation de Voters Symfony pour une logique fine

### 3. Dashboard adaptatif
**ProblÃ¨me**: Interface diffÃ©rente selon les rÃ´les
**Solution**: Templates modulaires avec hÃ©ritage Twig

## ğŸ“ˆ Ã‰volutions possibles

- [ ] SystÃ¨me de notifications par email
- [ ] Export des avis en PDF/Excel
- [ ] Statistiques avancÃ©es pour les responsables
- [ ] API REST pour application mobile
- [ ] SystÃ¨me de tags pour les Ã©vÃ©nements

 NÂ° matricule: [Votre matricule]